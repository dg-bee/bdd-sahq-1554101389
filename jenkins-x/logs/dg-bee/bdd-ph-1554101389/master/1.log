Step: build-step-credential-initializer:

{"level":"warn","ts":1554101445.9625337,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554101445.9630172,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}
Step: build-step-git-source-0:

{"level":"warn","ts":1554101448.855158,"logger":"fallback-logger","caller":"logging/config.go:65","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/test\" is not a valid GitHub commit ID"}
{"level":"info","ts":1554101449.75753,"logger":"fallback-logger","caller":"git-init/main.go:92","msg":"Successfully cloned \"https://github.com/******/bdd-ph-1554101389.git\" @ \"master\" in path \"/workspace\""}
Step: build-step-jenkins:

Picked up _JAVA_OPTIONS: -Xmx400m
Started
Running in Durability level: PERFORMANCE_OPTIMIZED
  18.712 [id=33]	WARNING	i.f.k.c.i.VersionUsageUtils#alert: The client is using resource type 'customresourcedefinitions' with unstable version 'v1beta1'
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /tmp/jenkinsTests.tmp/jenkins4979439764742679001test/workspace/job
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
[Pipeline] }
[Pipeline] // stage
[Pipeline] withCredentials
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (CI Build and push snapshot)
Stage "CI Build and push snapshot" skipped due to when conditional
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Release)
[Pipeline] git
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/******/bdd-ph-1554101389.git # timeout=10
Fetching upstream changes from https://github.com/******/bdd-ph-1554101389.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/******/bdd-ph-1554101389.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision f25cd3b6d4abe9e0f9f62db2e688b0d1347d5eb0 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f f25cd3b6d4abe9e0f9f62db2e688b0d1347d5eb0
 > git branch -a -v --no-abbrev # timeout=10
 > git branch -D master # timeout=10
 > git checkout -b master f25cd3b6d4abe9e0f9f62db2e688b0d1347d5eb0
Commit message: "Draft create"
First time build. Skipping changelog.
[Pipeline] sh
+ **-release-version
+ echo 0.0.1
[Pipeline] sh
+ cat VERSION
+ ** step tag --version 0.0.1
Tag v0.0.1 created and pushed to remote origin
[Pipeline] sh
+ python -m unittest

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
[Pipeline] sh
+ cat VERSION
+ export VERSION=0.0.1
+ skaffold build -f skaffold.yaml
time="2019-04-01T06:52:28Z" level=warning msg="config version (skaffold/v1beta2) out of date: upgrading to latest (skaffold/v1beta6)"
Generating Tag for [changeme]...
Starting build...
Building [changeme]...
Sending build context to Docker daemon  540.1kBSending build context to Docker daemon  543.7kB
Step 1/6 : FROM python:onbuild
onbuild: Pulling from library/python
1c7fe136a31e: Pulling fs layer
ece825d3308b: Pulling fs layer
06854774e2f3: Pulling fs layer
f0db43b9b8da: Pulling fs layer
2d21c767035c: Pulling fs layer
e10b68fb77e6: Pulling fs layer
e2c0fb34dff3: Pulling fs layer
e96bc319bce0: Pulling fs layer
490280dbcfb7: Pulling fs layer
f0db43b9b8da: Waiting
2d21c767035c: Waiting
e10b68fb77e6: Waiting
e2c0fb34dff3: Waiting
e96bc319bce0: Waiting
490280dbcfb7: Waiting
ece825d3308b: Verifying Checksum
ece825d3308b: Download complete
06854774e2f3: Verifying Checksum
06854774e2f3: Download complete
1c7fe136a31e: Verifying Checksum
1c7fe136a31e: Download complete
2d21c767035c: Download complete
e2c0fb34dff3: Verifying Checksum
e2c0fb34dff3: Download complete
e10b68fb77e6: Verifying Checksum
e10b68fb77e6: Download complete
e96bc319bce0: Verifying Checksum
e96bc319bce0: Download complete
490280dbcfb7: Verifying Checksum
490280dbcfb7: Download complete
f0db43b9b8da: Verifying Checksum
f0db43b9b8da: Download complete
1c7fe136a31e: Pull complete
ece825d3308b: Pull complete
06854774e2f3: Pull complete
f0db43b9b8da: Pull complete
2d21c767035c: Pull complete
e10b68fb77e6: Pull complete
e2c0fb34dff3: Pull complete
e96bc319bce0: Pull complete
490280dbcfb7: Pull complete
Digest: sha256:76df62c122c910751d8cd3101f8e3da39efd4ee828686b7ff0b5a5b1d967553f
Status: Downloaded newer image for python:onbuild
[91m# Executing 3 build triggers...
[0mStep 1/1 : COPY requirements.txt /usr/src/app/
Step 1/1 : RUN pip install --no-cache-dir -r requirements.txt
 ---> Running in 2ed4d4120233
[91mYou are using pip version 10.0.1, however version 19.0.3 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
[0mStep 1/1 : COPY . /usr/src/app
 ---> b12a46008386
Step 2/6 : COPY requirements.txt .
 ---> a62348bff078
Step 3/6 : ENV PORT 8080
 ---> Running in fcd62a2a1694
 ---> 71c8925933e3
Step 4/6 : EXPOSE 8080
 ---> Running in ffe3d122f2ea
 ---> d6b662c08fbc
Step 5/6 : ENTRYPOINT python
 ---> Running in 2934cf4b4809
 ---> 785625db3158
Step 6/6 : CMD app.py
 ---> Running in 6b109054e908
 ---> dba4f4b5ac84
Successfully built dba4f4b5ac84
The push refers to a repository [10.31.243.7:5000/******/bdd-ph-1554101389]
382379597230: Preparing
45c8c6647bc3: Preparing
c19af5443f7e: Preparing
f76e5ccce296: Preparing
29778035860f: Preparing
fc88d2431f4d: Preparing
1dc1b82fa010: Preparing
fc88d2431f4d: Waiting
09e3fd9cf357: Preparing
138d1921c15b: Preparing
d714f65bc280: Preparing
fd6060e25706: Preparing
d7ed640784f1: Preparing
1618a71a1198: Preparing
1dc1b82fa010: Waiting
09e3fd9cf357: Waiting
138d1921c15b: Waiting
d714f65bc280: Waiting
1618a71a1198: Waiting
382379597230: Pushed
29778035860f: Pushed
f76e5ccce296: Pushed
45c8c6647bc3: Pushed
c19af5443f7e: Pushed
1dc1b82fa010: Pushed
fc88d2431f4d: Pushed
138d1921c15b: Pushed
d7ed640784f1: Pushed
09e3fd9cf357: Pushed
1618a71a1198: Pushed
fd6060e25706: Pushed
d714f65bc280: Pushed
0.0.1: digest: sha256:38bc26a92dd7ebbb45a94880ee8f049162c825ba54cfa1bed3619d2dff2328b1 size: 3049
Build complete in 1m13.015988625s
Starting test...
Test complete in 6.838Âµs
changeme -> 10.31.243.7:5000/******/bdd-ph-1554101389:0.0.1@sha256:38bc26a92dd7ebbb45a94880ee8f049162c825ba54cfa1bed3619d2dff2328b1
There is a new version (0.26.0) of Skaffold available. Download it at https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64

[Pipeline] sh
+ cat VERSION
+ ** step post build --image 10.31.243.7:5000/******/bdd-ph-1554101389:0.0.1
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Promote to Environments)
[Pipeline] dir
Running in /tmp/jenkinsTests.tmp/jenkins4979439764742679001test/workspace/job/charts/bdd-ph-1554101389
[Pipeline] {
[Pipeline] sh
+ cat ../../VERSION
+ ** step changelog --version v0.0.1
Using batch mode as inside a pipeline
Converted /tmp/jenkinsTests.tmp/jenkins4979439764742679001test/workspace/job/charts/bdd-ph-1554101389 to an unshallow repository
Generating change log from git ref f25cd3b6d4abe9e0f9f62db2e688b0d1347d5eb0 => ba88a486bfad2bbed4e9e84820405ec38433e9c1
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Failed to enrich commits with issues: User.jenkins.io "" is invalid: metadata.name: Required value: name or generateName is required
Finding issues in commit messages using git format
No release found for ******/bdd-ph-1554101389 and tag v0.0.1 so creating a new release
Updated the release information at https://github.com/******/bdd-ph-1554101389/releases/tag/v0.0.1
generated: /tmp/jenkinsTests.tmp/jenkins4979439764742679001test/workspace/job/charts/bdd-ph-1554101389/templates/release.yaml
Created Release bdd-ph-1554101389-0-0-1 resource in namespace **
Updating PipelineActivity ******-bdd-ph-1554101389-master-1 with version 0.0.1
Updated PipelineActivities ******-bdd-ph-1554101389-master-1 with release notes URL: https://github.com/******/bdd-ph-1554101389/releases/tag/v0.0.1
[Pipeline] sh
+ ** step helm release
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: jenkins-x http://chartmuseum.jenkins-x.io
Successfully added Helm repository jenkins-x.
Adding missing Helm repo: releases http://jenkins-x-chartmuseum:8080
Successfully added Helm repository releases.
No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Uploading chart file bdd-ph-1554101389-0.0.1.tgz to http://jenkins-x-chartmuseum:8080/api/charts
Received 201 response: {"saved":true}
[Pipeline] sh
+ cat ../../VERSION
+ ** promote -b --all-auto --timeout 1h --version 0.0.1
prow based install so skip waiting for the merge of Pull Requests to go green as currently there is an issue with gettingstatuses from the PR, see https://github.com/jenkins-x/**/issues/2410
Promoting app bdd-ph-1554101389 version 0.0.1 to namespace **-staging
Created Pull Request: https://github.com/******/environment-dani-**-dev-cluster-staging/pull/2

Failed to merge the Pull Request https://github.com/******/environment-dani-**-dev-cluster-staging/pull/2 due to PUT https://api.github.com/repos/******/environment-dani-**-dev-cluster-staging/pulls/2/merge: 405 Pull Request is not mergeable [] maybe I don't have karma?
Rebasing PullRequest due to conflict
Created Pull Request: https://github.com/******/environment-dani-**-dev-cluster-staging/pull/4

Pull Request https://github.com/******/environment-dani-**-dev-cluster-staging/pull/4 is merged at sha 425545b11a245efce1daf5293d817e3e8d502540
Pull Request merged but we are not waiting for the update pipeline to complete!
Could not find the service URL in namespace **-staging for names bdd-ph-1554101389, **-bdd-ph-1554101389, **-staging-bdd-ph-1554101389
[Pipeline] }
[Pipeline] // dir
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
